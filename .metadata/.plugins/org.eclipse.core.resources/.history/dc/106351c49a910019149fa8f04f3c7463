<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.kitri.admin.model.dao.AdminDao">
	<select id="getMemberList" parameterMap="map" resultType="memberdetaildto">
		#{key} #{word}
		
		select m.name, m.id, m.emailid, m.emaildomain, m.joindate, 
               d.tel1, d.tel2, d.tel3, d.zipcode, d.address, d.address_detail 
        	 from member m, member_detail d 
         	where m.id = d.id 
         
         String key = map.get("key");
         String word = map.get("word");
         if(word != null && !word.isEmpty()) {
            if("id".equals(key)) {
               sql.append("and m.id = ? \n");
            } else {
               sql.append("and m." + key + " like '%'||?||'%' \n");
            }
         }         
			
	</select>
</mapper>